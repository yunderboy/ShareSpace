{"version":3,"sources":["../../node_modules/@angular/core/esm5 lazy","../../src lazy","../../src/providers/location-data/location-data.ts","../../src/app/main.ts","../../src/app/app.module.ts","../../src/app/app.component.ts"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncatched exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 109;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@angular/core/esm5 lazy\n// module id = 109\n// module chunks = 2","var map = {\n\t\"../pages/locations/locations.module\": [\n\t\t273,\n\t\t1\n\t],\n\t\"../pages/sections/sections.module\": [\n\t\t274,\n\t\t0\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tvar ids = map[req];\n\tif(!ids)\n\t\treturn Promise.reject(new Error(\"Cannot find module '\" + req + \"'.\"));\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(ids[0]);\n\t});\n};\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 150;\nmodule.exports = webpackAsyncContext;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src lazy\n// module id = 150\n// module chunks = 2","import { Injectable } from '@angular/core';\nimport { Http, Response, Headers } from '@angular/http';\nimport {Paho} from 'ng2-mqtt/mqttws31';\nimport { ApplicationRef } from '@angular/core';\n\n@Injectable()\nexport class LocationDataProvider {\n\n  private _client: Paho.MQTT.Client;\n\n  public static locationData: any = {\n    \"locations\": [\n      {\n        \"locationId\": 0,\n        \"alias\": \"AL\",\n        \"label\": \"Allerød\",\n        \"description\": \"Allerød\",\n        \"workRooms\": [\n          {\n            \"roomId\": 0,\n            \"alias\": \"D1330\",\n            \"tables\": [\n              {\n                \"tableId\": 0,\n                \"deviceId\": \"c41405\",\n                \"inUse\": false,\n                \"label\": \"Lols\"\n              },\n              {\n                \"tableId\": 1,\n                \"label\": \"Chefens skrivebord\",\n                \"deviceId\": \"36216c\",\n                \"inUse\": false\n              },\n              {\n                \"tableId\": 2,\n                \"label\": \"lel\",\n                \"deviceId\": \"675f9\",\n                \"inUse\": false\n              }\n            ]\n          }\n        ],\n        \"meetingRooms\": [\n          {\n            \"roomId\": 1,\n            \"alias\": \"AL015\",\n            \"inUse\": false\n          }\n        ]\n      }\n    ]\n  };\n\n  constructor(\n    private http: Http,\n    private appRef: ApplicationRef\n  ){\n\n    this.http.get('http://192.168.1.7/location.json').toPromise()\n      .then((resp) => {\n        console.log('Recieved response', resp.json());\n        LocationDataProvider.locationData = resp.json();\n      })\n      .catch((err) => {\n        console.error('Recieved request err ', err);\n      });\n\n    this._client = new Paho.MQTT.Client('192.168.1.7', 61614, '', '');\n\n    this._client.onConnectionLost = (responseObject: Object) => {\n      console.log('Connection lost.');\n    };\n\n    this._client.onMessageArrived = (message: Paho.MQTT.Message) => {\n      LocationDataProvider.locationData.increment++;\n\n      console.log('Message arrived.');\n      const payload = JSON.parse(message.payloadString);\n      console.log(payload);\n      console.log('Searching for work- or meeting rooms with associated with device id: ' + payload.deviceId);\n\n      // TODO: make a less shitty search function\n      LocationDataProvider.locationData.locations.forEach(location => {\n\n        // Meeting rooms\n        for (let i = 0; i < location.meetingRooms.length; i++) {\n          if (location.meetingRooms[i].deviceId == payload.deviceId) {\n            location.meetingRooms[i].inUse = payload.inUse;\n            break\n          }\n        }\n\n        // Workrooms w. tables\n        for (let i = 0; i < location.workRooms.length; i++) {\n          for (let j = 0; j < location.workRooms[i].tables.length; j++) {\n\n            if (location.workRooms[i].tables[j].deviceId == payload.deviceId) {\n              location.workRooms[i].tables[j].inUse = payload.inUse;\n              break\n            }\n          }\n        }\n      });\n\n      // Force change detection\n      LocationDataProvider.locationData = JSON.parse(JSON.stringify(LocationDataProvider.locationData));\n      console.log(LocationDataProvider.locationData);\n    };\n\n    this._client.connect({ onSuccess: this.onConnected.bind(this) });\n\n  }\n\n  private onConnected():void {\n    console.log('Connected to broker.');\n    this._client.subscribe('sts/#', {});\n  }\n\n\n  public getAllLocations = (): Array<any> => {\n      return LocationDataProvider.locationData.locations;\n  };\n\n  public getLocationById = (locationId: number): any => {\n    const index = LocationDataProvider.locationData.locations.findIndex(location => location.locationId == locationId);\n    return LocationDataProvider.locationData.locations[index];\n  };\n\n  public getWorkRoomTables = (workRoomId: number): Array<any> => {\n    console.log('Searching for work room with id: ' + workRoomId);\n\n    let result = [];\n    LocationDataProvider.locationData.locations.forEach((location, index) => {\n      console.log('Current location' + JSON.stringify(location));\n      let roomIndex = location.workRooms.findIndex(workroom => workroom.roomId = workRoomId);\n      result = LocationDataProvider.locationData.locations[index].workRooms[roomIndex].tables;\n    });\n    return result\n\n  };\n\n  public getIncrement() {\n    return LocationDataProvider.locationData.increment;\n  }\n\n  public getWorkRoomsFromLocation(locationId) {\n    const i = LocationDataProvider.locationData.locations.findIndex(location => location.locationId == 0);\n    console.log('FOUND ID' + i + ' requested ID: ' + locationId);\n    return LocationDataProvider.locationData.locations[i].workRooms;\n  }\n\n  public calcTablesInUse = (workRoom: any): number => {\n    LocationDataProvider.locationData.locations.forEach(location => {});\n\n    return workRoom.tables.filter(table => table.inUse == false).length;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/providers/location-data/location-data.ts","import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app.module';\n\nplatformBrowserDynamic().bootstrapModule(AppModule);\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/main.ts","import { NgModule, ErrorHandler } from '@angular/core';\nimport { BrowserModule } from '@angular/platform-browser';\nimport { IonicApp, IonicModule, IonicErrorHandler } from 'ionic-angular';\nimport { MyApp } from './app.component';\n\nimport { StatusBar } from '@ionic-native/status-bar';\nimport { SplashScreen } from '@ionic-native/splash-screen';\nimport { LocationDataProvider } from '../providers/location-data/location-data';\nimport { HttpModule, JsonpModule } from '@angular/http';\n\n\n@NgModule({\n  declarations: [\n    MyApp,\n  ],\n  imports: [\n    BrowserModule,\n    HttpModule,\n    IonicModule.forRoot(MyApp)\n  ],\n  bootstrap: [IonicApp],\n  entryComponents: [\n    MyApp,\n  ],\n  providers: [\n    StatusBar,\n    SplashScreen,\n    {provide: ErrorHandler, useClass: IonicErrorHandler},\n    LocationDataProvider,\n\n  ]\n})\nexport class AppModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.module.ts","import { Component, ViewChild } from '@angular/core';\nimport { Platform, Nav, Config } from 'ionic-angular';\nimport { StatusBar } from '@ionic-native/status-bar';\nimport { SplashScreen } from '@ionic-native/splash-screen';\n\n@Component({\n  templateUrl: 'app.html'\n})\nexport class MyApp {\n  rootPage: string = 'LocationsPage';\n\n  @ViewChild(Nav) nav: Nav;\n\n  constructor(\n    platform: Platform,\n    statusBar: StatusBar,\n    splashScreen: SplashScreen,\n    config: Config\n  ) {\n    platform.ready().then(() => {\n      // Okay, so the platform is ready and our plugins are available.\n      // Here you can do any higher level native things you might need.\n      statusBar.styleDefault();\n      splashScreen.hide();\n\n    });\n    config.set('mode', 'ios')\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.component.ts"],"sourceRoot":""}